/**
 * This code was AUTOGENERATED using the codama library.
 * Please DO NOT EDIT THIS FILE, instead use visitors
 * to add features, then rerun codama to update it.
 *
 * @see https://github.com/codama-idl/codama
 */

import {
  isProgramError,
  type Address,
  type SOLANA_ERROR__INSTRUCTION_ERROR__CUSTOM,
  type SolanaError,
} from '@solana/web3.js';
import { CPMM_PROGRAM_ADDRESS } from '../programs';

/** ConfigFeeRateExceeded: The provided fee rate for AmmsConfig exceeds the maximum allowed value of 10000 basis points (100%). */
export const CPMM_ERROR__CONFIG_FEE_RATE_EXCEEDED = 0x1770; // 6000
/** QuoteLiquidityIsZero: Quote liquidity is zero. */
export const CPMM_ERROR__QUOTE_LIQUIDITY_IS_ZERO = 0x1771; // 6001
/** BaseLiquidityIsZero: Base liquidity is zero. */
export const CPMM_ERROR__BASE_LIQUIDITY_IS_ZERO = 0x1772; // 6002
/** InsufficientQuoteLiquidity: Quote liquidity is less then minimal operable liquidity. */
export const CPMM_ERROR__INSUFFICIENT_QUOTE_LIQUIDITY = 0x1773; // 6003
/** InsufficientBaseLiquidity: Base liquidity is less then minimal operable liquidity. */
export const CPMM_ERROR__INSUFFICIENT_BASE_LIQUIDITY = 0x1774; // 6004
/** LpTokensSupplyIsZero: Liquidity tokens supply is zero. */
export const CPMM_ERROR__LP_TOKENS_SUPPLY_IS_ZERO = 0x1775; // 6005
/** CpAmmNotLaunched: CpAmm is not launched. */
export const CPMM_ERROR__CP_AMM_NOT_LAUNCHED = 0x1776; // 6006
/** CpAmmNotInitialized: CpAmm is not initialized. */
export const CPMM_ERROR__CP_AMM_NOT_INITIALIZED = 0x1777; // 6007
/** CpAmmAlreadyInitialized: CpAmm is already initialized. */
export const CPMM_ERROR__CP_AMM_ALREADY_INITIALIZED = 0x1778; // 6008
/** CpAmmAlreadyLaunched: CpAmm is already launched. */
export const CPMM_ERROR__CP_AMM_ALREADY_LAUNCHED = 0x1779; // 6009
/** ProvidedQuoteLiquidityIsZero: Provided quote liquidity is zero. */
export const CPMM_ERROR__PROVIDED_QUOTE_LIQUIDITY_IS_ZERO = 0x177a; // 6010
/** ProvidedBaseLiquidityIsZero: Provided base liquidity is zero. */
export const CPMM_ERROR__PROVIDED_BASE_LIQUIDITY_IS_ZERO = 0x177b; // 6011
/** ProvidedLpTokensIsZero: Provided liquidity tokens are zero. */
export const CPMM_ERROR__PROVIDED_LP_TOKENS_IS_ZERO = 0x177c; // 6012
/** SwapAmountIsZero: Swap amount cannot be zero. */
export const CPMM_ERROR__SWAP_AMOUNT_IS_ZERO = 0x177d; // 6013
/** EstimatedResultIsZero: Estimated swap result cannot be zero. */
export const CPMM_ERROR__ESTIMATED_RESULT_IS_ZERO = 0x177e; // 6014
/** LaunchLiquidityTooSmall: Launch liquidity must be at least 4 times greater than the initial locked liquidity. */
export const CPMM_ERROR__LAUNCH_LIQUIDITY_TOO_SMALL = 0x177f; // 6015
/** LpTokensCalculationFailed: Failed to calculate liquidity tokens to mint due to invalid input or overflow. */
export const CPMM_ERROR__LP_TOKENS_CALCULATION_FAILED = 0x1780; // 6016
/** AfterswapCalculationFailed: Failed to calculate afterswap state due to invalid input or overflow. */
export const CPMM_ERROR__AFTERSWAP_CALCULATION_FAILED = 0x1781; // 6017
/** WithdrawLiquidityCalculationFailed: Failed to calculate withdraw liquidity due to invalid input or overflow. */
export const CPMM_ERROR__WITHDRAW_LIQUIDITY_CALCULATION_FAILED = 0x1782; // 6018
/** SwapResultIsZero: Swap result is zero. */
export const CPMM_ERROR__SWAP_RESULT_IS_ZERO = 0x1783; // 6019
/** SwapSlippageExceeded: Calculated slippage exceeds allowed tolerance. */
export const CPMM_ERROR__SWAP_SLIPPAGE_EXCEEDED = 0x1784; // 6020
/** ProvideOverflowError: Overflow error when providing liquidity. */
export const CPMM_ERROR__PROVIDE_OVERFLOW_ERROR = 0x1785; // 6021
/** WithdrawOverflowError: Overflow error when withdrawing liquidity. */
export const CPMM_ERROR__WITHDRAW_OVERFLOW_ERROR = 0x1786; // 6022
/** SwapOverflowError: Overflow error when swapping. */
export const CPMM_ERROR__SWAP_OVERFLOW_ERROR = 0x1787; // 6023
/** ProvidersFeesIsZero: Protocol fees to redeem is zero */
export const CPMM_ERROR__PROVIDERS_FEES_IS_ZERO = 0x1788; // 6024
/** BaseQuoteRatioCalculationFailed: Failed to calculate base-to-quote liquidity ratio due to invalid input or overflow. */
export const CPMM_ERROR__BASE_QUOTE_RATIO_CALCULATION_FAILED = 0x1789; // 6025
/** ConstantProductCalculationFailed: Failed to calculate constant product due to invalid input or overflow. */
export const CPMM_ERROR__CONSTANT_PRODUCT_CALCULATION_FAILED = 0x178a; // 6026
/** ConstantProductToleranceExceeded: Constant product tolerance exceeded. */
export const CPMM_ERROR__CONSTANT_PRODUCT_TOLERANCE_EXCEEDED = 0x178b; // 6027
/** LiquidityRatioToleranceExceeded: Liquidity ratio tolerance exceeded. */
export const CPMM_ERROR__LIQUIDITY_RATIO_TOLERANCE_EXCEEDED = 0x178c; // 6028
/** MintHasFreezeAuthority: Tradable mint for CpAmm has freeze authority. */
export const CPMM_ERROR__MINT_HAS_FREEZE_AUTHORITY = 0x178d; // 6029
/** UnsupportedTradableMint: Tradable mint for CpAmm owned by unsupported token program. */
export const CPMM_ERROR__UNSUPPORTED_TRADABLE_MINT = 0x178e; // 6030
/** UnsupportedTokenExtension: Tradable mint for CpAmm hase unsupported token extension. */
export const CPMM_ERROR__UNSUPPORTED_TOKEN_EXTENSION = 0x178f; // 6031
/** MintTransferFeeCalculationFailed: Mint with TransferFee extension failed to calculate fee */
export const CPMM_ERROR__MINT_TRANSFER_FEE_CALCULATION_FAILED = 0x1790; // 6032
/** InsufficientBalanceForTransfer: Insufficient balance in the token account to complete the token_instructions. */
export const CPMM_ERROR__INSUFFICIENT_BALANCE_FOR_TRANSFER = 0x1791; // 6033
/** LiquidityMintOverflow: Minting the requested amount of liquidity tokens cause supply overflow. */
export const CPMM_ERROR__LIQUIDITY_MINT_OVERFLOW = 0x1792; // 6034
/** LiquidityBurnOverflow: Burning the requested amount of liquidity tokens cause supply overflow. */
export const CPMM_ERROR__LIQUIDITY_BURN_OVERFLOW = 0x1793; // 6035

export type CpmmError =
  | typeof CPMM_ERROR__AFTERSWAP_CALCULATION_FAILED
  | typeof CPMM_ERROR__BASE_LIQUIDITY_IS_ZERO
  | typeof CPMM_ERROR__BASE_QUOTE_RATIO_CALCULATION_FAILED
  | typeof CPMM_ERROR__CONFIG_FEE_RATE_EXCEEDED
  | typeof CPMM_ERROR__CONSTANT_PRODUCT_CALCULATION_FAILED
  | typeof CPMM_ERROR__CONSTANT_PRODUCT_TOLERANCE_EXCEEDED
  | typeof CPMM_ERROR__CP_AMM_ALREADY_INITIALIZED
  | typeof CPMM_ERROR__CP_AMM_ALREADY_LAUNCHED
  | typeof CPMM_ERROR__CP_AMM_NOT_INITIALIZED
  | typeof CPMM_ERROR__CP_AMM_NOT_LAUNCHED
  | typeof CPMM_ERROR__ESTIMATED_RESULT_IS_ZERO
  | typeof CPMM_ERROR__INSUFFICIENT_BALANCE_FOR_TRANSFER
  | typeof CPMM_ERROR__INSUFFICIENT_BASE_LIQUIDITY
  | typeof CPMM_ERROR__INSUFFICIENT_QUOTE_LIQUIDITY
  | typeof CPMM_ERROR__LAUNCH_LIQUIDITY_TOO_SMALL
  | typeof CPMM_ERROR__LIQUIDITY_BURN_OVERFLOW
  | typeof CPMM_ERROR__LIQUIDITY_MINT_OVERFLOW
  | typeof CPMM_ERROR__LIQUIDITY_RATIO_TOLERANCE_EXCEEDED
  | typeof CPMM_ERROR__LP_TOKENS_CALCULATION_FAILED
  | typeof CPMM_ERROR__LP_TOKENS_SUPPLY_IS_ZERO
  | typeof CPMM_ERROR__MINT_HAS_FREEZE_AUTHORITY
  | typeof CPMM_ERROR__MINT_TRANSFER_FEE_CALCULATION_FAILED
  | typeof CPMM_ERROR__PROVIDED_BASE_LIQUIDITY_IS_ZERO
  | typeof CPMM_ERROR__PROVIDED_LP_TOKENS_IS_ZERO
  | typeof CPMM_ERROR__PROVIDED_QUOTE_LIQUIDITY_IS_ZERO
  | typeof CPMM_ERROR__PROVIDE_OVERFLOW_ERROR
  | typeof CPMM_ERROR__PROVIDERS_FEES_IS_ZERO
  | typeof CPMM_ERROR__QUOTE_LIQUIDITY_IS_ZERO
  | typeof CPMM_ERROR__SWAP_AMOUNT_IS_ZERO
  | typeof CPMM_ERROR__SWAP_OVERFLOW_ERROR
  | typeof CPMM_ERROR__SWAP_RESULT_IS_ZERO
  | typeof CPMM_ERROR__SWAP_SLIPPAGE_EXCEEDED
  | typeof CPMM_ERROR__UNSUPPORTED_TOKEN_EXTENSION
  | typeof CPMM_ERROR__UNSUPPORTED_TRADABLE_MINT
  | typeof CPMM_ERROR__WITHDRAW_LIQUIDITY_CALCULATION_FAILED
  | typeof CPMM_ERROR__WITHDRAW_OVERFLOW_ERROR;

let cpmmErrorMessages: Record<CpmmError, string> | undefined;
if (process.env.NODE_ENV !== 'production') {
  cpmmErrorMessages = {
    [CPMM_ERROR__AFTERSWAP_CALCULATION_FAILED]: `Failed to calculate afterswap state due to invalid input or overflow.`,
    [CPMM_ERROR__BASE_LIQUIDITY_IS_ZERO]: `Base liquidity is zero.`,
    [CPMM_ERROR__BASE_QUOTE_RATIO_CALCULATION_FAILED]: `Failed to calculate base-to-quote liquidity ratio due to invalid input or overflow.`,
    [CPMM_ERROR__CONFIG_FEE_RATE_EXCEEDED]: `The provided fee rate for AmmsConfig exceeds the maximum allowed value of 10000 basis points (100%).`,
    [CPMM_ERROR__CONSTANT_PRODUCT_CALCULATION_FAILED]: `Failed to calculate constant product due to invalid input or overflow.`,
    [CPMM_ERROR__CONSTANT_PRODUCT_TOLERANCE_EXCEEDED]: `Constant product tolerance exceeded.`,
    [CPMM_ERROR__CP_AMM_ALREADY_INITIALIZED]: `CpAmm is already initialized.`,
    [CPMM_ERROR__CP_AMM_ALREADY_LAUNCHED]: `CpAmm is already launched.`,
    [CPMM_ERROR__CP_AMM_NOT_INITIALIZED]: `CpAmm is not initialized.`,
    [CPMM_ERROR__CP_AMM_NOT_LAUNCHED]: `CpAmm is not launched.`,
    [CPMM_ERROR__ESTIMATED_RESULT_IS_ZERO]: `Estimated swap result cannot be zero.`,
    [CPMM_ERROR__INSUFFICIENT_BALANCE_FOR_TRANSFER]: `Insufficient balance in the token account to complete the token_instructions.`,
    [CPMM_ERROR__INSUFFICIENT_BASE_LIQUIDITY]: `Base liquidity is less then minimal operable liquidity.`,
    [CPMM_ERROR__INSUFFICIENT_QUOTE_LIQUIDITY]: `Quote liquidity is less then minimal operable liquidity.`,
    [CPMM_ERROR__LAUNCH_LIQUIDITY_TOO_SMALL]: `Launch liquidity must be at least 4 times greater than the initial locked liquidity.`,
    [CPMM_ERROR__LIQUIDITY_BURN_OVERFLOW]: `Burning the requested amount of liquidity tokens cause supply overflow.`,
    [CPMM_ERROR__LIQUIDITY_MINT_OVERFLOW]: `Minting the requested amount of liquidity tokens cause supply overflow.`,
    [CPMM_ERROR__LIQUIDITY_RATIO_TOLERANCE_EXCEEDED]: `Liquidity ratio tolerance exceeded.`,
    [CPMM_ERROR__LP_TOKENS_CALCULATION_FAILED]: `Failed to calculate liquidity tokens to mint due to invalid input or overflow.`,
    [CPMM_ERROR__LP_TOKENS_SUPPLY_IS_ZERO]: `Liquidity tokens supply is zero.`,
    [CPMM_ERROR__MINT_HAS_FREEZE_AUTHORITY]: `Tradable mint for CpAmm has freeze authority.`,
    [CPMM_ERROR__MINT_TRANSFER_FEE_CALCULATION_FAILED]: `Mint with TransferFee extension failed to calculate fee`,
    [CPMM_ERROR__PROVIDED_BASE_LIQUIDITY_IS_ZERO]: `Provided base liquidity is zero.`,
    [CPMM_ERROR__PROVIDED_LP_TOKENS_IS_ZERO]: `Provided liquidity tokens are zero.`,
    [CPMM_ERROR__PROVIDED_QUOTE_LIQUIDITY_IS_ZERO]: `Provided quote liquidity is zero.`,
    [CPMM_ERROR__PROVIDE_OVERFLOW_ERROR]: `Overflow error when providing liquidity.`,
    [CPMM_ERROR__PROVIDERS_FEES_IS_ZERO]: `Protocol fees to redeem is zero`,
    [CPMM_ERROR__QUOTE_LIQUIDITY_IS_ZERO]: `Quote liquidity is zero.`,
    [CPMM_ERROR__SWAP_AMOUNT_IS_ZERO]: `Swap amount cannot be zero.`,
    [CPMM_ERROR__SWAP_OVERFLOW_ERROR]: `Overflow error when swapping.`,
    [CPMM_ERROR__SWAP_RESULT_IS_ZERO]: `Swap result is zero.`,
    [CPMM_ERROR__SWAP_SLIPPAGE_EXCEEDED]: `Calculated slippage exceeds allowed tolerance.`,
    [CPMM_ERROR__UNSUPPORTED_TOKEN_EXTENSION]: `Tradable mint for CpAmm hase unsupported token extension.`,
    [CPMM_ERROR__UNSUPPORTED_TRADABLE_MINT]: `Tradable mint for CpAmm owned by unsupported token program.`,
    [CPMM_ERROR__WITHDRAW_LIQUIDITY_CALCULATION_FAILED]: `Failed to calculate withdraw liquidity due to invalid input or overflow.`,
    [CPMM_ERROR__WITHDRAW_OVERFLOW_ERROR]: `Overflow error when withdrawing liquidity.`,
  };
}

export function getCpmmErrorMessage(code: CpmmError): string {
  if (process.env.NODE_ENV !== 'production') {
    return (cpmmErrorMessages as Record<CpmmError, string>)[code];
  }

  return 'Error message not available in production bundles.';
}

export function isCpmmError<TProgramErrorCode extends CpmmError>(
  error: unknown,
  transactionMessage: {
    instructions: Record<number, { programAddress: Address }>;
  },
  code?: TProgramErrorCode
): error is SolanaError<typeof SOLANA_ERROR__INSTRUCTION_ERROR__CUSTOM> &
  Readonly<{ context: Readonly<{ code: TProgramErrorCode }> }> {
  return isProgramError<TProgramErrorCode>(
    error,
    transactionMessage,
    CPMM_PROGRAM_ADDRESS,
    code
  );
}
